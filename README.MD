# Steam Shortcut Manager++

This is a tool that adds non-steam shortcuts by reading from manifest files that contain information about the game. The manifest files contain the game name, executable, command line arguments, and any images.

I created this application because there aren't any quick and easy ways of adding a huge batch of games to the steam deck at once. I don't want to manually add every single .exe game, it was already tedious enough to do it on my PC.

Essentially, you should be able to place all the artwork inside the game folder, then write a manifest file. Or perhaps skip writing the manifest file entirely and just specify the game folder, or an app id...

# TODO

- Ability to set proton config in the manifest

- Ability to set keyboard and controller bindings. Ideally like how the official steam manifests work.

- Ability to remove games using the manifests.

- ~~Installation to /bin/games so you can double click a .smanifest to immediately add it to steam. Although this wouldn't work on the steam deck, so maybe the shebang has to be changed.~~ Changed my mind, instead you can right click the folder to add a game.

- Fixing icons. This is not really a priority though, since you only see them in the overlay menu.

- Some sort of non steam game manager that allows you to copy games to and from a USB HDD

# Getting Started

Simply do `python3 shortcut-manager.py /full/path/to/SomeFolderHere`. The shortcut manager will automatically locate the exe inside the folder, download artwork, and then add the game with all the needed artwork to Steam. (Tip: Dragging and dropping the folder into the terminal also works)

If your game has an exe in a strange place (UE4 games do this) you will have to write a manifest. Refer to sample.smanifest for examples. Key names are case insensitive.

After writing your manifest, you can do `python3 shortcut-manager.py /full/path/to/MyGame.smanifest`. Pointing to just the folder also works, it will search for any file ending in .smanifest inside the folder.

# Steam Deck Installation

NOT FINISHED YET

`python3 -m ensurepip`, `python3 -m pip install requests`, then `install to steamdeck.sh`.

This will add it to Dolphin's right click menu. I don't know how flatpak works, so this script just copies the required files to ~/Documents.

Right click any folder containing a game -> Add To Steam.

# Save data backup/restore

NOT FINISHED YET

This requires writing a .smanifest, inserting a SaveDirectory key in the manifest, then inserting a Proton key in the manifest.

## On Linux

If proton is set to true, it will attempt to search within the game's proton prefix. Windows environment variables will also be resolved, since many games save to %AppData% or similar locations.

If proton is set to false, it will be treated as a raw path and resolved using `os.path.expandvars()`.

There are no sanity checks, so make sure you trust the smanifest if you didn't write it.

## On Windows

This feature currently does not support Windows, because I don't use Windows.

~~The proton key is ignored and the path is resolved using `os.path.expandvars()`.~~

## Usage

Use `python3 shortcut-manager.py --backup-save` to copy the game's save files to a dir named `SSM_SAVE_BACKUP` within the game's install dir. Then use `python3 shortcut-manager.py --restore-save` to restore it. Note that if you are restoring it to a new computer you must run the game at least one time after adding the shortcut so Steam will generate the proton prefix.

# Documentation

If you're just here because you're interested in how Steam shortcuts and steam:// links are stored/generated, look [here](https://github.com/CorporalQuesadilla/Steam-Shortcut-Manager/wiki/Steam-Shortcuts-Documentation) for documentation.

If you're here for documentation on how this program works, continue reading.

Please note that there are some differences in the arguments my program expects vs. how Steam actually stores shortcuts - the documentation below is simply for the "easy" input my program can be given in order to generate the funky input that Steam actually needs. This prevents the user from worrying about funky ASCII characters or quote encapsulation. It's much easier to type 0 than (insert series of invisible characters here).

# How it works

I simply modify shortcuts.vdf based on what I've seen in other entries generated by Steam itself. You can read more here: https://github.com/CorporalQuesadilla/Steam-Shortcut-Manager/wiki/Steam-Shortcuts-Documentation

As for the steam:// ID generation, see the comment used in the excerpt of Scott Rice's code in shortcuts.py in the GetURL() function.

# License

SEE LICENSE.MD

# Acknowledgments
* CorporalQuesadilla for the original Steam Shortcut Manager, of course. (Named libVDF here)
* Scott Rice for ICE, or rather his work finding how steam:// IDs are generated.
* PsychoTheHedgehog for also documenting how shortcuts.vdf is laid out. Unfortunately, their work was trashed some time ago and the Google cached version dissappeared sometime in July 2018. It turns out they had discovered essentially the same things I had, but at least it's reassuring to find someone else had documented almost the exact the same things. Their documentation was fairly old (missing some variables added in recent years) and I wasn't a fan of how it was explained anyways, but hey, credit to them for independently finding the same things first. Hopefully my documentation here will remain updated and accessible, as it seems to be the only documentation publicly available now.
